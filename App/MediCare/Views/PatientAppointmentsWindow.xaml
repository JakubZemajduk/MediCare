<Window x:Class="MediCare.Views.PatientAppointmentsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Moje wizyty" Height="600" Width="900"
        WindowStartupLocation="CenterScreen">
    <ScrollViewer>
        <StackPanel Margin="20">
            <TextBlock Text="Moje wizyty" FontSize="24" FontWeight="Bold" Margin="0,0,0,20"/>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                <TextBlock Text="Pokaż:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <ComboBox Name="FilterComboBox" Width="150" SelectionChanged="FilterComboBox_SelectionChanged">
                    <ComboBoxItem Content="Wszystkie" IsSelected="True"/>
                    <ComboBoxItem Content="Przeszłe"/>
                    <ComboBoxItem Content="Przyszłe"/>
                </ComboBox>
            </StackPanel>

            <Grid Margin="0,0,0,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="Data" FontWeight="Bold" Grid.Column="0"/>
                <TextBlock Text="Lekarz" FontWeight="Bold" Grid.Column="1"/>
                <TextBlock Text="Specjalizacja" FontWeight="Bold" Grid.Column="2"/>
                <TextBlock Text="Status" FontWeight="Bold" Grid.Column="3"/>
            </Grid>

            <ItemsControl Name="AppointmentsList">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="LightGray" BorderThickness="1" CornerRadius="5" Padding="10" Margin="0,5">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Text="{Binding DateTime, StringFormat={}{0:dd.MM.yyyy HH:mm}}" Grid.Column="0"/>
                                <TextBlock Text="{Binding DoctorName}" Grid.Column="1"/>
                                <TextBlock Text="{Binding Specialization}" Grid.Column="2"/>
                                <TextBlock Text="{Binding StatusName}" Grid.Column="3"/>

                                <Button Grid.Column="4"
                                        ToolTip="Zobacz raport z wizyty"
                                        Tag="{Binding AppointmentId}"
                                        Click="ShowReport_Click"
                                        Padding="5,2"
                                        Margin="10,0,0,0"
                                        IsEnabled="{Binding HasReport}"
                                        Background="#D0E7FF" BorderBrush="#88BEEB"
                                        Foreground="Black" FontWeight="SemiBold" Cursor="Hand">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="📄" FontSize="14" Margin="0,0,5,0"/>
                                        <TextBlock Text="Raport"/>
                                    </StackPanel>
                                </Button>

                                <Button Grid.Column="5"
                                        ToolTip="Anuluj wizytę"
                                        Tag="{Binding AppointmentId}"
                                        Click="CancelAppointment_Click"
                                        Padding="5,2"
                                        Margin="10,0,0,0"
                                        Background="#FFD6D6" BorderBrush="#D88"
                                        Foreground="Black" FontWeight="SemiBold" Cursor="Hand">
                                    <TextBlock Text="🗑" FontSize="14"/>
                                </Button>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </ScrollViewer>
</Window>